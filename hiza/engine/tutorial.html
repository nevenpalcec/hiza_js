<head>

    <!-- favicon -->
    <link rel="icon" type="image/x-icon" href="https://raw.githubusercontent.com/nevenpalcec/hiza_js/main/hiza/engine/favicon.png">

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <!-- HiÅ¾a Engine -->
    <script>
        var DISABLE_HIZA_INIT = true;
    </script>
    <script src="https://cdn.jsdelivr.net/gh/nevenpalcec/hiza_js@main/hiza/engine/hiza.engine.js"></script>

    <style>

        .page_title {
            font-family: 'Courier New', Courier, monospace;
            display: inline-block;
            text-decoration: underline;
            cursor: pointer;
        }

        .tutorial {
            padding: 5px 10px;
            /* border-bottom: 1px solid black; */
        }
        .tutorial pre {
            border: 1px solid lightgray;
            border-left: 4px solid #04AA6D;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
</head>
<body>

    <main class="container">
        <class class="row">

            <div class="col-12 pt-4">
                <h1 class="page_title" onclick="window.open('https://github.com/nevenpalcec/hiza_js', '_blank');">hiza.engine</h1>
                &nbsp;&nbsp;&nbsp;
                <h1 class="page_title" onclick="window.open('https://raw.githubusercontent.com/nevenpalcec/hiza_js/main/hiza/engine/index.html', '_blank');">Demo HTML</h1>
            </div>

            <div class="col-md-6 mb-4">
                <input id="tutorial_search" class="form-control" type="text" placeholder="Search tutorial...">
            </div>
            <div class="col"></div>

            <div class="col-md-6 tutorial">
                <h3> Import </h3>
                <pre id="tut_0">

    &lt;!-- Disable automatic init() --&gt;
    &lt;script&gt;
        var DISABLE_HIZA_INIT = true;
    &lt;/script&gt;

    &lt;script src="https://cdn.jsdelivr.net/gh/nevenpalcec/hiza_js@main/hiza/engine/hiza.engine.js"&gt;
                </pre>
            </div>

            <div class="col-md-6 tutorial">
                <h3> &lt;template hiza&gt; </h3>
                <pre id="tut_1">
                </pre>
            </div>

            <div class="col-md-6 tutorial">
                <h3> &lt;script hiza-async&gt; </h3>
                <pre id="tut_2">
                </pre>
            </div>

            <div class="col-md-6 tutorial">
                <h3> $if, $else if, $else </h3>
                <pre id="tut_3">
                </pre>
            </div>

            <div class="col-md-6 tutorial">
                <h3> $for (let idx ...) </h3>
                <pre id="tut_4">
                </pre>
            </div>

            <div class="col-md-6 tutorial">
                <h3> $for (let ... of) </h3>
                <pre id="tut_5">
                </pre>
            </div>

            <div class="col-md-6 tutorial">
                <h3> Redraw - EL.hiza.run() </h3>
                <pre id="tut_6">
                </pre>
            </div>

            <div class="col-md-6 tutorial">
                <h3> Make one template - hiza.engine.init_one </h3>
                <pre id="tut_7">
                </pre>
            </div>

            <div class="col-md-6 tutorial">
                <h3> Make all templates - hiza.engine.init <em>(this is default on window load)</em> </h3>
                <pre id="tut_8">
                </pre>
            </div>

        </class>
    </main>

<script>
tut_1.innerText = '' + 
`
    <div id="container"></div>

    <template id="templ_id" hiza data-dest="#container">
        <!-- Code... -->
    </template>
\n`;
tut_2.innerText = '' +
`
    <div id="container"></div>

    <template id="templ_id" hiza data-dest="#container">
        
        ${'<'}script hiza-async>

            /*
                Keywords:
                - SCOPE - template scope
                - SCOPE.DEST - destination element
            */
           
           // Using await blocks processing until script is finished
           let objects = await fetch(...).then(res => res.json());

           // Put variable on global scope
           SCOPE['objects'] = objects;

           // Log scope variables
           console.log(SCOPE);
        ${'<'}/script>

    </template>
\n`;
tut_3.innerText = '' +
`
    <div id="container"></div>

    <template id="templ_id" hiza data-dest="#container">
        
        ${'<'}script hiza-async>

            // Show loading
            SCOPE.DEST.innerHTML = 'Loading...';

            // Dummy objects
            SCOPE['objects'] = [1, 2, 3];
        ${'<'}/script>

        <!-- Use variable of SCOPE -->
        $if (objects.length > 10) {

            <span> Found a lot of objects </span>
        }
        $else if (objects.length > 5) {

            <span> Found some objects </span>
        }
        $else {
            
            <!-- Print variable -->
            Found \${ objects.length } objects.
        }

    </template>
\n`;
tut_4.innerText = '' +
`
    <div id="container"></div>

    <template id="templ_id" hiza data-dest="#container">

        $for (let i = 0; i < objects.length; ++i) {

            <!-- Write objects -->
            Objects \${i}: \${ objects[i] }
            <br>
        }

    </template>
\n`;
tut_5.innerText = '' +
`
    <div id="container"></div>

    <template id="templ_id" hiza data-dest="#container">

        $for (let object of objects) {

            <!-- Write objects -->
            Object: \${ object }
            <br>
        }

    </template>
\n`;
tut_6.innerText = '' +
`
    <div id="container"></div>

    <template id="templ_id" hiza data-dest="#container">
        <!-- Code... -->
    </template>

    <button onclick="redraw();"> Redraw </button>

    ${'<'}script>

        function redraw() {

            let templ = document.getElementById('templ_id');
            templ.hiza.run();
        }
    ${'<'}/script>
\n`;
tut_7.innerText = '' +
`
    <div id="container"></div>

    <!-- Remove 'hiza' attribute to avoid automatic init -->
    <template id="templ_id" data-dest="#container">
        <!-- Code... -->
    </template>

    <button onclick="
        hiza.engine.init_one(document.getElementById('templ_id'));
        "> Draw template </button>
\n`;
tut_8.innerText = '' +
`
    <!--
        Put "DISABLE_HIZA_INIT = false"
        before script import to avoid init on page load
    -->

    <div id="container"></div>

    <template id="templ_id" hiza data-dest="#container">
        <!-- Code... -->
    </template>

    <!-- Draws all templates with 'hiza' attribute -->
    <button onclick="hiza.engine.init();"> Draw all templates </button>
\n`;


tutorial_search.onkeyup = function() {

    document.querySelectorAll('.tutorial').forEach(div => {
    
        let s = div.innerText.toLowerCase();
        let v = tutorial_search.value.toLowerCase();
        if (s.includes(v)) {
            div.classList.remove('d-none');
        }
        else {
            div.classList.add('d-none');
        }
    });
};

</script>
</body>
